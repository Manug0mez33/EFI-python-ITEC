{% extends 'layout.html' %}

{% block body %}
<div class="container mt-4">
    <h2>{{ post.title }}</h2>
    <h6 class="card-subtitle mb-2 text-muted">
        Por {{ post.user.username }} el {{ post.date_created.strftime('%d/%m/%Y %H:%M') if post.date_created else '' }}
    </h6>

    <div class="my-3">
        {% for category in post.categories %}
            <span class="badge bg-primary me-1">{{ category.name }}</span>
        {% endfor %}
    </div>
    <p class="mt-3">{{ post.content }}</p>
    <hr>
    <h4>Comentarios</h4>
    <ul class="list-group mb-3">
        {% for comment in post.comments %}
            <li class="list-group-item">
                <strong>
                    {% if comment.user %}
                        {{ comment.user.username }}
                    {% else %}
                        Usuario eliminado
                    {% endif %}
                </strong>: {{ comment.content }}
                <br>
                <small class="text-muted">
                    {{ comment.date_created.strftime('%d/%m/%Y %H:%M') if comment.date_created else '' }}
                </small>
            </li>
        {% else %}
            <li class="list-group-item">No hay comentarios a√∫n.</li>
        {% endfor %}
    </ul>
    <form method="POST">
        <div class="mb-3">
            <label for="content">Agregar comentario</label>
            <textarea class="form-control" id="content" name="content" rows="2" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Comentar</button>
    </form>
</div>
{% endblock %}